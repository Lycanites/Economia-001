<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Logus AR Experience</title>

    <!-- Librería principal A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- AR.js para marcador Hiro -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body style="margin: 0; overflow: hidden">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-marker preset="hiro">
        <a-entity rotation="-90 0 0">
          <!-- CÍRCULO CENTRAL -->
          <a-torus
            color="#00ffff"
            radius="0.6"
            radius-tubular="0.06"
            material="emissive: #00ffff; emissiveIntensity: 0.6"
            animation="property: material.emissiveIntensity;
                       dir: alternate;
                       dur: 1500;
                       loop: true;
                       to: 1.2"
          >
          </a-torus>

          <!-- LINEAS HUD -->
          <a-cylinder
            position="-0.9 0.5 0"
            rotation="0 0 90"
            radius="0.01"
            height="1"
            color="#00ffff"
          >
          </a-cylinder>

          <a-cylinder
            position="0.9 0.5 0"
            rotation="0 0 90"
            radius="0.01"
            height="1"
            color="#00ffff"
          >
          </a-cylinder>

          <!-- BOTÓN CONCEPTOS I -->
          <a-plane
            position="-1.8 1 0"
            width="1.4"
            height="0.5"
            color="#111"
            opacity="0.7"
            class="clickable"
            id="conceptos1Btn"
          >
          </a-plane>

          <a-text
            value="Conceptos I"
            position="-1.8 1 0.01"
            align="center"
            width="3"
            color="#4cc9f0"
          >
          </a-text>

          <!-- BOTÓN CONCEPTOS II -->
          <a-plane
            position="1.8 1 0"
            width="1.4"
            height="0.5"
            color="#111"
            opacity="0.7"
            class="clickable"
            id="conceptos2Btn"
          >
          </a-plane>

          <a-text
            value="Conceptos II"
            position="1.8 1 0.01"
            align="center"
            width="3"
            color="#ff4b5c"
          >
          </a-text>

          <!-- PANEL INFO -->
          <a-plane
            position="0 -1.5 0"
            width="3.5"
            height="1"
            color="#000"
            opacity="0.8"
          >
          </a-plane>

          <a-text
            id="info"
            value="Selecciona un bloque"
            position="0 -1.5 0.01"
            align="center"
            width="4"
            color="#ffffff"
          >
          </a-text>
        </a-entity>
      </a-marker>

      <a-entity camera>
        <a-cursor rayOrigin="mouse" raycaster="objects: .clickable"> </a-cursor>
      </a-entity>
    </a-scene>

    <script>
      function efectoClick(boton) {
        boton.setAttribute(
          "animation",
          "property: scale; to: 1.1 1.1 1; dur: 150; dir: alternate; loop: 2",
        );
      }

      const info = document.querySelector("#info");
      const marker = document.querySelector("a-marker a-entity");

      const conceptosI = [
        "Problema (Ing vs Econ)",
        "Escasez",
        "Problema Económico",
        "Factores Productivos",
        "Necesidad",
        "Satisfactores",
        "Pirámide de Maslow",
        "Costo de oportunidad",
      ];

      const conceptosII = [
        "Ciencia",
        "Ciencia Formal",
        "Ciencia Fáctica",
        "Ciencia Natural",
        "Ciencia Social",
      ];

      function limpiarConceptos() {
        document.querySelectorAll(".concept-item").forEach((e) => e.remove());
        const regresar = document.querySelector("#regresarBtn");
        if (regresar) regresar.remove();
      }

      function mostrarMenuConceptos(lista) {
        limpiarConceptos();
        info.setAttribute("value", "Selecciona un concepto");

        const radio = 1.2;
        const total = lista.length;

        lista.forEach((concepto, index) => {
          const angulo = (index / total) * Math.PI * 2;
          const x = Math.cos(angulo) * radio;
          const y = Math.sin(angulo) * radio;

          const plano = document.createElement("a-plane");
          plano.setAttribute("position", `${x} ${y} 0`);
          plano.setAttribute("width", "1");
          plano.setAttribute("height", "0.4");
          plano.setAttribute("color", "#111");
          plano.setAttribute("opacity", "0.8");
          plano.setAttribute("class", "clickable concept-item");

          plano.addEventListener("click", function () {
            efectoClick(plano);
            info.setAttribute("value", concepto);
          });

          const texto = document.createElement("a-text");
          texto.setAttribute("value", concepto);
          texto.setAttribute("align", "center");
          texto.setAttribute("width", "2.5");
          texto.setAttribute("color", "#00ffff");
          texto.setAttribute("position", "0 0 0.01");
          texto.setAttribute("class", "concept-item");

          plano.appendChild(texto);
          marker.appendChild(plano);
        });

        // BOTÓN REGRESAR
        const regresar = document.createElement("a-plane");
        regresar.setAttribute("id", "regresarBtn");
        regresar.setAttribute("position", "0 0 0");
        regresar.setAttribute("width", "0.8");
        regresar.setAttribute("height", "0.4");
        regresar.setAttribute("color", "#ff4b5c");
        regresar.setAttribute("opacity", "0.9");
        regresar.setAttribute("class", "clickable concept-item");

        regresar.addEventListener("click", function () {
          efectoClick(regresar);
          limpiarConceptos();
          info.setAttribute("value", "Selecciona un bloque");
        });

        const textoRegresar = document.createElement("a-text");
        textoRegresar.setAttribute("value", "Regresar");
        textoRegresar.setAttribute("align", "center");
        textoRegresar.setAttribute("width", "2");
        textoRegresar.setAttribute("color", "#fff");
        textoRegresar.setAttribute("position", "0 0 0.01");
        textoRegresar.setAttribute("class", "concept-item");

        regresar.appendChild(textoRegresar);
        marker.appendChild(regresar);
      }

      // ==============================
      // BOTÓN CONCEPTOS I
      // ==============================
      document
        .querySelector("#conceptos1Btn")
        .addEventListener("click", function () {
          efectoClick(this);
          mostrarMenuConceptos(conceptosI);
        });

      // ==============================
      // BOTÓN CONCEPTOS II
      // ==============================
      document
        .querySelector("#conceptos2Btn")
        .addEventListener("click", function () {
          efectoClick(this);
          mostrarMenuConceptos(conceptosII);
        });
    </script>
  </body>
</html>
