<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Economia</title>

    <!-- Librería principal A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- AR.js para marcador Hiro -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body style="margin: 0; overflow: hidden">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-marker preset="hiro">
        <a-entity rotation="-90 0 0" scale="0.5 0.5 0.5">
          <!-- CÍRCULO CENTRAL -->
          <a-torus
            color="#B1CC74"
            radius="0.9"
            radius-tubular="0.09"
            material="emissive: #CDE49B; emissiveIntensity: 0.6"
            animation="property: material.emissiveIntensity;
               dir: alternate;
               dur: 1500;
               loop: true;
               to: 1.2"
          ></a-torus>

          <!-- BOTÓN CONCEPTOS I -->
          <a-plane
            position="-3 2.5 0"
            width="1.4"
            height="0.5"
            color="#545F66"
            material="shader: flat; opacity: 1"
            class="clickable"
            id="conceptos1Btn"
          ></a-plane>

          <a-text
            value="Conceptos I"
            position="-3 2.5 0.05"
            align="center"
            width="6"
            color="#D0F4EA"
            material="shader: flat"
          ></a-text>

          <!-- BOTÓN CONCEPTOS II -->
          <a-plane
            position="3 2.5 0"
            width="1.4"
            height="0.5"
            color="#545F66"
            material="shader: flat; opacity: 1"
            class="clickable"
            id="conceptos2Btn"
          ></a-plane>

          <a-text
            value="Conceptos II"
            position="3 2.5 0.05"
            align="center"
            width="6"
            color="#D0F4EA"
            material="shader: flat"
          ></a-text>

          <!-- PANEL INFO -->
          <a-plane
            id="panelInfo"
            position="0 -4 0"
            width="3.5"
            height="2"
            color="#829399"
            material="shader: flat; opacity: 1"
          ></a-plane>

          <a-text
            id="info"
            value="Selecciona un bloque"
            position="0 -4 0.05"
            align="center"
            width="6"
            wrap-count="40"
            color="#D0F4EA"
            material="shader: flat; opacity: 1"
            scale="1.2 1.2 1.2"
          ></a-text>
        </a-entity>
      </a-marker>

      <a-entity camera>
        <a-cursor rayOrigin="mouse" raycaster="objects: .clickable"> </a-cursor>
      </a-entity>
    </a-scene>

    <script>
      function efectoClick(boton) {
        boton.setAttribute(
          "animation",
          "property: scale; to: 1.15 1.15 1; dur: 150; dir: alternate; loop: 2",
        );
      }

      const info = document.querySelector("#info");
      const panelInfo = document.querySelector("#panelInfo");
      const marker = document.querySelector("a-marker a-entity");

      // ==============================
      // FUNCIÓN AJUSTAR PANEL
      // ==============================

      function ajustarPanel(texto) {
        const lineas = texto.split("\n").length;
        const altura = Math.max(1.2, lineas * 0.25);

        panelInfo.setAttribute("height", altura);
        info.setAttribute("wrap-count", 40);
        info.setAttribute("value", texto);
      }

      // ==============================
      // DEFINICIONES
      // ==============================

      const definiciones = {
        "Problema (Ing vs Econ)":
          "PROBLEMA\n\n" +
          "Situación de brecha entre estado actual y deseado.\n\n" +
          "INGENIERÍA:\n" +
          "Situación técnica que requiere solución óptima usando métodos científicos y tecnológicos.\n\n" +
          "ECONÓMICO:\n" +
          "Surge cuando los recursos son limitados y las necesidades ilimitadas.",

        Escasez:
          "ESCASEZ\n\n" +
          "Condición donde los recursos son insuficientes para satisfacer todas las necesidades.\n\n" +
          "Es la base de la teoría económica.",

        "Problema Económico":
          "PROBLEMA ECONÓMICO\n\n" +
          "Necesidades ilimitadas vs recursos limitados.\n\n" +
          "Obliga a responder:\n" +
          "¿Qué producir?\n" +
          "¿Cómo producir?\n" +
          "¿Para quién producir?",

        "Factores Productivos":
          "FACTORES PRODUCTIVOS\n\n" +
          "Recursos que se combinan para generar bienes y servicios.\n\n" +
          "Tierra, Trabajo, Capital y Organización.",

        Necesidad:
          "NECESIDAD\n\n" +
          "Sensación de carencia unida al deseo de satisfacerla.",

        Satisfactores:
          "SATISFACTORES\n\n" +
          "Bien o servicio que extingue una necesidad.\n\n" +
          "Ejemplo:\nNecesidad: hambre.\nSatisfactor: alimento.",

        "Pirámide de Maslow":
          "PIRÁMIDE DE MASLOW\n\n" +
          "Jerarquía de necesidades humanas.\n\n" +
          "1. Fisiológicas\n2. Seguridad\n3. Sociales\n4. Estima\n5. Autorrealización",

        Ciencia:
          "CIENCIA\n\n" +
          "Conjunto sistemático de conocimientos obtenidos mediante método científico.",

        "Ciencia Formal":
          "CIENCIA FORMAL\n\n" +
          "Estudia sistemas abstractos como números y símbolos.",

        "Ciencia Fáctica":
          "CIENCIA FÁCTICA\n\n" + "Estudia hechos observables y verificables.",

        "Ciencia Natural":
          "CIENCIA NATURAL\n\n" + "Analiza fenómenos físicos y biológicos.",

        "Ciencia Social":
          "CIENCIA SOCIAL\n\n" +
          "Estudia el comportamiento humano en sociedad.",
      };

      const conceptosI = [
        "Problema (Ing vs Econ)",
        "Escasez",
        "Problema Económico",
        "Factores Productivos",
        "Necesidad",
        "Satisfactores",
        "Pirámide de Maslow",
      ];

      const conceptosII = [
        "Ciencia",
        "Ciencia Formal",
        "Ciencia Fáctica",
        "Ciencia Natural",
        "Ciencia Social",
      ];

      function limpiarConceptos() {
        document.querySelectorAll(".concept-item").forEach((e) => e.remove());
        const regresar = document.querySelector("#regresarBtn");
        if (regresar) regresar.remove();
      }

      function mostrarMenuConceptos(lista, colorBase) {
        limpiarConceptos();
        ajustarPanel("Selecciona un concepto");

        const radio = 2.5;
        const total = lista.length;

        lista.forEach((concepto, index) => {
          const angulo = (index / total) * Math.PI * 2;
          const x = Math.cos(angulo) * radio;
          const y = Math.sin(angulo) * radio;

          const plano = document.createElement("a-plane");
          plano.setAttribute("position", `${x} ${y} 0`);
          plano.setAttribute("width", "1.2");
          plano.setAttribute("height", "0.45");
          plano.setAttribute("color", colorBase);
          plano.setAttribute("class", "clickable concept-item");

          plano.addEventListener("click", function () {
            efectoClick(plano);
            ajustarPanel(definiciones[concepto]);
          });

          const texto = document.createElement("a-text");
          texto.setAttribute("value", concepto);
          texto.setAttribute("align", "center");
          texto.setAttribute("width", "3");
          texto.setAttribute("color", "#FFFFFF");
          texto.setAttribute("position", "0 0 0.05");
          texto.setAttribute("class", "concept-item");

          plano.appendChild(texto);
          marker.appendChild(plano);
        });

        // BOTÓN REGRESAR
        const regresar = document.createElement("a-plane");
        regresar.setAttribute("id", "regresarBtn");
        regresar.setAttribute("position", "0 0 0");
        regresar.setAttribute("width", "1");
        regresar.setAttribute("height", "0.4");
        regresar.setAttribute("color", "#ff4b5c");
        regresar.setAttribute("class", "clickable concept-item");

        regresar.addEventListener("click", function () {
          efectoClick(regresar);
          limpiarConceptos();
          ajustarPanel("Selecciona un bloque");
        });

        const textoRegresar = document.createElement("a-text");
        textoRegresar.setAttribute("value", "Regresar");
        textoRegresar.setAttribute("align", "center");
        textoRegresar.setAttribute("width", "3");
        textoRegresar.setAttribute("color", "#fff");
        textoRegresar.setAttribute("position", "0 0 0.05");
        textoRegresar.setAttribute("class", "concept-item");

        regresar.appendChild(textoRegresar);
        marker.appendChild(regresar);
      }

      // BOTONES PRINCIPALES

      document
        .querySelector("#conceptos1Btn")
        .addEventListener("click", function () {
          efectoClick(this);
          mostrarMenuConceptos(conceptosI, "#2E86C1"); // Azul Conceptos I
        });

      document
        .querySelector("#conceptos2Btn")
        .addEventListener("click", function () {
          efectoClick(this);
          mostrarMenuConceptos(conceptosII, "#27AE60"); // Verde Conceptos II
        });
    </script>
  </body>
</html>
